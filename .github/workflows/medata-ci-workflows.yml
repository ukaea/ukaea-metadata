name: Metadata CI Workflow
on: 
  push:
    branches: 
      - main
      - develop
  pull_request: 
    branches: 
      - main
      - develop


jobs: 
  validate-json: 
    runs-on: ubuntu-latest
    steps: 
      - uses: actions/checkout@v4
      - name: validate-json-files
        id: json-validate
        uses: GrantBirki/json-yaml-validate@v3
        with: 
          comment: "true"
          
      - name: Validate campaign JSON
        uses: GrantBirki/json-yaml-validate@v3
        with: 
          json_schema: ./ukaea-schema/facility/hive/campaign.schema.json
          files: ./ukaea-schema/examples/hive/campaign.json
          comment: "true"
      - name: Validate experiment JSON
        uses: GrantBirki/json-yaml-validate@v3
        with: 
          json_schema: ./ukaea-schema/facility/hive/experiment.schema.json
          files: ./ukaea-schema/examples/hive/experiment.json
          comment: "true"

      - name: Validate facility JSON
        uses: GrantBirki/json-yaml-validate@v3
        with: 
          json_schema: ./ukaea-schema/facility/facility.schema.json
          files: ./ukaea-schema/examples/facility.json
          comment: "true"
      - name: Set up Python
        uses: actions/setup-python@v4
        with: 
          python-version: '3.11'
      - name: custom-camel-case-validation
        run: | 
          python validate_camel_case.py "./**/*.json" 
          file: /scicat-schema/*.json 
          
  #./ukaea-schema/diagnostics/*.json
  # ./ukaea-schema/examples/hive/*.json
  # ./ukaea-schema/examples/*.json
  # ./ukaea-schema/facility/hive/*.json 
  # ./ukaea-schema/facility/*.json
  # ./ukaea-schema/pegasus/ansys_mechanical/*.json 
  # ./ukaea-schema/pegasus/*.json
  # ./ukaea-schema/*.json


